																					<div class="page-header clearfix"><h1 class="pull-left">Le Modèle de Données</h1></div>
							<h2>Le modèle relationnel</h2>
<p>Les scénarios du précédent chapitre décrivent les objets principaux de notre projet: les offres, les partenaires et les catégories. Voici le schéma des entités correspondant:</p>
<p class="tcenter"><a href="assets/img/jobeet_3-1.png" rel="shadowbox"><img src="assets/img/jobeet_3-1.png" alt="" class="img-polaroid"></a></p>
<p>En plus des colonnes décrites dans les scénarios, nous avons également ajouté les colonnes <strong>created_at</strong> et <strong>updated_at</strong>. Nous allons configurer Symfony2 pour définir leur valeur automatiquement quand un objet est enregistré ou mis à jour.</p>
<br>
<h2>La Base De Données</h2>
<p>Pour stocker les offres, les partenaires et les catégories dans la BDD, Symfony2 utilise <a href="http://www.doctrine-project.org/projects/orm.html" target="_blank">Doctrine ORM</a>. Pour définir les paramètres de connexion, vous devez éditer le fichier <strong>app/config/parameters.ini</strong> (pour ce tutoriel, nous allons utiliser MySQL):</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pun">;</span><span class="pln">app</span><span class="pun">/</span><span class="pln">config</span><span class="pun">/</span><span class="pln">parameters</span><span class="pun">.</span><span class="pln">ini</span></li><li class="L1"><span class="pun">[</span><span class="pln">parameters</span><span class="pun">]</span></li><li class="L2"><span class="pln">    database_driver   </span><span class="pun">=</span><span class="pln"> pdo_mysql</span></li><li class="L3"><span class="pln">    database_host     </span><span class="pun">=</span><span class="pln"> localhost</span></li><li class="L4"><span class="pln">    database_name     </span><span class="pun">=</span><span class="pln"> jobeet</span></li><li class="L5"><span class="pln">    database_user     </span><span class="pun">=</span><span class="pln"> root</span></li><li class="L6"><span class="pln">    database_password </span><span class="pun">=</span><span class="pln"> password</span></li></ol></pre>
<p>Maintenant que Doctrine connaît votre BDD, vous pouvez l'utiliser pour créer la BDD pour vous (si vous ne l'avez pas déjà créée):</p>
<pre>php app/console doctrine:database:create</pre>
<br>
<h2>Le schéma</h2>
<p>Pour que Doctrine connaisse nos objets, nous allons créer des fichiers "métadonnées" qui décrivent la façon dont nos objets seront stockés dans la BDD:</p>
<pre class="prettyprint linenums lang-yaml"><ol class="linenums"><li class="L0"><span class="com"># src/Ens/JobeetBundle/Resources/config/doctrine/Category.orm.yml</span></li><li class="L1"><span class="pln">Ens\JobeetBundle\Entity\</span><span class="kwd">Category:</span></li><li class="L2"><span class="pln">  </span><span class="kwd">type: </span><span class="pln">entity</span></li><li class="L3"><span class="pln">  </span><span class="kwd">table: </span><span class="pln">category</span></li><li class="L4"><span class="pln">  </span><span class="kwd">id:</span></li><li class="L5"><span class="pln">    </span><span class="kwd">id:</span></li><li class="L6"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">integer</span></li><li class="L7"><span class="pln">      </span><span class="kwd">generator: </span><span class="pln">{ </span><span class="kwd">strategy: </span><span class="pln">AUTO }</span></li><li class="L8"><span class="pln">  </span><span class="kwd">fields:</span></li><li class="L9"><span class="pln">    </span><span class="kwd">name:</span></li><li class="L0"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">string</span></li><li class="L1"><span class="pln">      </span><span class="kwd">length: </span><span class="pln">255</span></li><li class="L2"><span class="pln">      </span><span class="kwd">unique: </span><span class="pln">true</span></li><li class="L3"><span class="pln">  </span><span class="kwd">oneToMany:</span></li><li class="L4"><span class="pln">    </span><span class="kwd">jobs:</span></li><li class="L5"><span class="pln">      </span><span class="kwd">targetEntity: </span><span class="pln">Job</span></li><li class="L6"><span class="pln">      </span><span class="kwd">mappedBy: </span><span class="pln">category</span></li><li class="L7"><span class="pln">    </span><span class="kwd">category_affiliates:</span></li><li class="L8"><span class="pln">      </span><span class="kwd">targetEntity: </span><span class="pln">CategoryAffiliate</span></li><li class="L9"><span class="pln">      </span><span class="kwd">mappedBy: </span><span class="pln">category</span></li></ol></pre>
<pre class="prettyprint linenums lang-yaml"><ol class="linenums"><li class="L0"><span class="com"># src/Ens/JobeetBundle/Resources/config/doctrine/Job.orm.yml</span></li><li class="L1"><span class="pln">Ens\JobeetBundle\Entity\</span><span class="kwd">Job:</span></li><li class="L2"><span class="pln">  </span><span class="kwd">type: </span><span class="pln">entity</span></li><li class="L3"><span class="pln">  </span><span class="kwd">table: </span><span class="pln">job</span></li><li class="L4"><span class="pln">  </span><span class="kwd">id:</span></li><li class="L5"><span class="pln">    </span><span class="kwd">id:</span></li><li class="L6"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">integer</span></li><li class="L7"><span class="pln">      </span><span class="kwd">generator: </span><span class="pln">{ </span><span class="kwd">strategy: </span><span class="pln">AUTO }</span></li><li class="L8"><span class="pln">  </span><span class="kwd">fields:</span></li><li class="L9"><span class="pln">    </span><span class="kwd">type:</span></li><li class="L0"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">string</span></li><li class="L1"><span class="pln">      </span><span class="kwd">length: </span><span class="pln">255</span></li><li class="L2"><span class="pln">      </span><span class="kwd">nullable: </span><span class="pln">true</span></li><li class="L3"><span class="pln">    </span><span class="kwd">company:</span></li><li class="L4"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">string</span></li><li class="L5"><span class="pln">      </span><span class="kwd">length: </span><span class="pln">255</span></li><li class="L6"><span class="pln">    </span><span class="kwd">logo:</span></li><li class="L7"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">string</span></li><li class="L8"><span class="pln">      </span><span class="kwd">length: </span><span class="pln">255</span></li><li class="L9"><span class="pln">      </span><span class="kwd">nullable: </span><span class="pln">true</span></li><li class="L0"><span class="pln">    </span><span class="kwd">url:</span></li><li class="L1"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">string</span></li><li class="L2"><span class="pln">      </span><span class="kwd">length: </span><span class="pln">255</span></li><li class="L3"><span class="pln">      </span><span class="kwd">nullable: </span><span class="pln">true</span></li><li class="L4"><span class="pln">    </span><span class="kwd">position:</span></li><li class="L5"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">string</span></li><li class="L6"><span class="pln">      </span><span class="kwd">length: </span><span class="pln">255</span></li><li class="L7"><span class="pln">    </span><span class="kwd">location:</span></li><li class="L8"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">string</span></li><li class="L9"><span class="pln">      </span><span class="kwd">length: </span><span class="pln">255</span></li><li class="L0"><span class="pln">    </span><span class="kwd">description:</span></li><li class="L1"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">text</span></li><li class="L2"><span class="pln">    </span><span class="kwd">how_to_apply:</span></li><li class="L3"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">text</span></li><li class="L4"><span class="pln">    </span><span class="kwd">token:</span></li><li class="L5"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">string</span></li><li class="L6"><span class="pln">      </span><span class="kwd">length: </span><span class="pln">255</span></li><li class="L7"><span class="pln">      </span><span class="kwd">unique: </span><span class="pln">true</span></li><li class="L8"><span class="pln">    </span><span class="kwd">is_public:</span></li><li class="L9"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">boolean</span></li><li class="L0"><span class="pln">      </span><span class="kwd">nullable: </span><span class="pln">true</span></li><li class="L1"><span class="pln">    </span><span class="kwd">is_activated:</span></li><li class="L2"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">boolean</span></li><li class="L3"><span class="pln">      </span><span class="kwd">nullable: </span><span class="pln">true</span></li><li class="L4"><span class="pln">    </span><span class="kwd">email:</span></li><li class="L5"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">string</span></li><li class="L6"><span class="pln">      </span><span class="kwd">length: </span><span class="pln">255</span></li><li class="L7"><span class="pln">    </span><span class="kwd">expires_at:</span></li><li class="L8"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">datetime</span></li><li class="L9"><span class="pln">    </span><span class="kwd">created_at:</span></li><li class="L0"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">datetime</span></li><li class="L1"><span class="pln">    </span><span class="kwd">updated_at:</span></li><li class="L2"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">datetime</span></li><li class="L3"><span class="pln">      </span><span class="kwd">nullable: </span><span class="pln">true</span></li><li class="L4"><span class="pln">  </span><span class="kwd">manyToOne:</span></li><li class="L5"><span class="pln">    </span><span class="kwd">category:</span></li><li class="L6"><span class="pln">      </span><span class="kwd">targetEntity: </span><span class="pln">Category</span></li><li class="L7"><span class="pln">      </span><span class="kwd">inversedBy: </span><span class="pln">jobs</span></li><li class="L8"><span class="pln">      </span><span class="kwd">joinColumn:</span></li><li class="L9"><span class="pln">        </span><span class="kwd">name: </span><span class="pln">category_id</span></li><li class="L0"><span class="pln">        </span><span class="kwd">referencedColumnName: </span><span class="pln">id</span></li><li class="L1"><span class="pln">  </span><span class="kwd">lifecycleCallbacks:</span></li><li class="L2"><span class="pln">    </span><span class="kwd">prePersist: </span><span class="pln">[ setCreatedAtValue ]</span></li><li class="L3"><span class="pln">    </span><span class="kwd">preUpdate: </span><span class="pln">[ setUpdatedAtValue ]</span></li></ol></pre>
<pre class="prettyprint linenums lang-yaml"><ol class="linenums"><li class="L0"><span class="com"># src/Ens/JobeetBundle/Resources/config/doctrine/Affiliate.orm.yml</span></li><li class="L1"><span class="pln">Ens\JobeetBundle\Entity\</span><span class="kwd">Affiliate:</span></li><li class="L2"><span class="pln">  </span><span class="kwd">type: </span><span class="pln">entity</span></li><li class="L3"><span class="pln">  </span><span class="kwd">table: </span><span class="pln">affiliate</span></li><li class="L4"><span class="pln">  </span><span class="kwd">id:</span></li><li class="L5"><span class="pln">    </span><span class="kwd">id:</span></li><li class="L6"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">integer</span></li><li class="L7"><span class="pln">      </span><span class="kwd">generator: </span><span class="pln">{ </span><span class="kwd">strategy: </span><span class="pln">AUTO }</span></li><li class="L8"><span class="pln">  </span><span class="kwd">fields:</span></li><li class="L9"><span class="pln">    </span><span class="kwd">url:</span></li><li class="L0"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">string</span></li><li class="L1"><span class="pln">      </span><span class="kwd">length: </span><span class="pln">255</span></li><li class="L2"><span class="pln">    </span><span class="kwd">email:</span></li><li class="L3"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">string</span></li><li class="L4"><span class="pln">      </span><span class="kwd">length: </span><span class="pln">255</span></li><li class="L5"><span class="pln">      </span><span class="kwd">unique: </span><span class="pln">true</span></li><li class="L6"><span class="pln">    </span><span class="kwd">token:</span></li><li class="L7"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">string</span></li><li class="L8"><span class="pln">      </span><span class="kwd">length: </span><span class="pln">255</span></li><li class="L9"><span class="pln">    </span><span class="kwd">created_at:</span></li><li class="L0"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">datetime</span></li><li class="L1"><span class="pln">  </span><span class="kwd">oneToMany:</span></li><li class="L2"><span class="pln">    </span><span class="kwd">category_affiliates:</span></li><li class="L3"><span class="pln">      </span><span class="kwd">targetEntity: </span><span class="pln">CategoryAffiliate</span></li><li class="L4"><span class="pln">      </span><span class="kwd">mappedBy: </span><span class="pln">affiliate</span></li><li class="L5"><span class="pln">  </span><span class="kwd">lifecycleCallbacks:</span></li><li class="L6"><span class="pln">    </span><span class="kwd">prePersist: </span><span class="pln">[ setCreatedAtValue ]</span></li></ol></pre>
<pre class="prettyprint linenums lang-yaml"><ol class="linenums"><li class="L0"><span class="com"># src/Ens/JobeetBundle/Resources/config/doctrine/CategoryAffiliate.orm.yml</span></li><li class="L1"><span class="pln">Ens\JobeetBundle\Entity\</span><span class="kwd">CategoryAffiliate:</span></li><li class="L2"><span class="pln">  </span><span class="kwd">type: </span><span class="pln">entity</span></li><li class="L3"><span class="pln">  </span><span class="kwd">table: </span><span class="pln">category_affiliate</span></li><li class="L4"><span class="pln">  </span><span class="kwd">id:</span></li><li class="L5"><span class="pln">    </span><span class="kwd">id:</span></li><li class="L6"><span class="pln">      </span><span class="kwd">type: </span><span class="pln">integer</span></li><li class="L7"><span class="pln">      </span><span class="kwd">generator: </span><span class="pln">{ </span><span class="kwd">strategy: </span><span class="pln">AUTO }</span></li><li class="L8"><span class="pln">  </span><span class="kwd">manyToOne:</span></li><li class="L9"><span class="pln">    </span><span class="kwd">category:</span></li><li class="L0"><span class="pln">      </span><span class="kwd">targetEntity: </span><span class="pln">Category</span></li><li class="L1"><span class="pln">      </span><span class="kwd">inversedBy: </span><span class="pln">category_affiliates</span></li><li class="L2"><span class="pln">      </span><span class="kwd">joinColumn:</span></li><li class="L3"><span class="pln">        </span><span class="kwd">name: </span><span class="pln">category_id</span></li><li class="L4"><span class="pln">        </span><span class="kwd">referencedColumnName: </span><span class="pln">id</span></li><li class="L5"><span class="pln">    </span><span class="kwd">affiliate:</span></li><li class="L6"><span class="pln">      </span><span class="kwd">targetEntity: </span><span class="pln">Affiliate</span></li><li class="L7"><span class="pln">      </span><span class="kwd">inversedBy: </span><span class="pln">category_affiliates</span></li><li class="L8"><span class="pln">      </span><span class="kwd">joinColumn:</span></li><li class="L9"><span class="pln">        </span><span class="kwd">name: </span><span class="pln">affiliate_id</span></li><li class="L0"><span class="pln">        </span><span class="kwd">referencedColumnName: </span><span class="pln">id</span></li></ol></pre>
<br>
<h2>L'ORM</h2>
<p>Maintenant Doctrine peut générer les classes qui définissent nos objets pour nous avec la commande:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pln">php app</span><span class="pun">/</span><span class="pln">console doctrine</span><span class="pun">:</span><span class="pln">generate</span><span class="pun">:</span><span class="pln">entities </span><span class="typ">EnsJobeetBundle</span></li><li class="L1"><span class="typ">Generating</span><span class="pln"> entities </span><span class="kwd">for</span><span class="pln"> bundle </span><span class="str">"EnsJobeetBundle"</span></li><li class="L2"><span class="pln">  </span><span class="pun">&gt;</span><span class="pln"> backing up </span><span class="typ">Job</span><span class="pun">.</span><span class="pln">php to </span><span class="typ">Job</span><span class="pun">.</span><span class="pln">php</span><span class="pun">~</span></li><li class="L3"><span class="pln">  </span><span class="pun">&gt;</span><span class="pln"> generating </span><span class="typ">Ens</span><span class="pln">\JobeetBundle\Entity\Job</span></li><li class="L4"><span class="pln">  </span><span class="pun">&gt;</span><span class="pln"> backing up </span><span class="typ">Category</span><span class="pun">.</span><span class="pln">php to </span><span class="typ">Category</span><span class="pun">.</span><span class="pln">php</span><span class="pun">~</span></li><li class="L5"><span class="pln">  </span><span class="pun">&gt;</span><span class="pln"> generating </span><span class="typ">Ens</span><span class="pln">\JobeetBundle\Entity\Category</span></li><li class="L6"><span class="pln">  </span><span class="pun">&gt;</span><span class="pln"> backing up </span><span class="typ">CategoryAffiliate</span><span class="pun">.</span><span class="pln">php to </span><span class="typ">CategoryAffiliate</span><span class="pun">.</span><span class="pln">php</span><span class="pun">~</span></li><li class="L7"><span class="pln">  </span><span class="pun">&gt;</span><span class="pln"> generating </span><span class="typ">Ens</span><span class="pln">\JobeetBundle\Entity\CategoryAffiliate</span></li><li class="L8"><span class="pln">  </span><span class="pun">&gt;</span><span class="pln"> backing up </span><span class="typ">Affiliate</span><span class="pun">.</span><span class="pln">php to </span><span class="typ">Affiliate</span><span class="pun">.</span><span class="pln">php</span><span class="pun">~</span></li><li class="L9"><span class="pln">  </span><span class="pun">&gt;</span><span class="pln"> generating </span><span class="typ">Ens</span><span class="pln">\JobeetBundle\Entity\Affiliate</span></li></ol></pre>
<p>Si vous regardez dans le répertoire <strong>Entity</strong> de <strong>EnsJobeetBundle</strong>, vous trouverez les classes nouvellement créées, là-dedans: <strong>Affiliate.php</strong>, <strong>Category.php</strong>, <strong>CategoryAffiliate.php</strong> et <strong>Job.php</strong>. Ouvrez <strong>Job.php</strong> et définissez les valeurs <strong>created_at</strong> et <strong>updated_at</strong> comme ci-dessous:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// src/Ens/JobeetBundle/Entity/Job.php</span></li><li class="L1"><span class="com">// ...</span></li><li class="L2"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> setCreatedAtValue</span><span class="pun">()</span></li><li class="L3"><span class="pun">{</span></li><li class="L4"><span class="pln">  </span><span class="kwd">if</span><span class="pun">(!</span><span class="pln">$this</span><span class="pun">-&gt;</span><span class="pln">getCreatedAt</span><span class="pun">())</span></li><li class="L5"><span class="pln">  </span><span class="pun">{</span></li><li class="L6"><span class="pln">    $this</span><span class="pun">-&gt;</span><span class="pln">created_at </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> \DateTime</span><span class="pun">();</span></li><li class="L7"><span class="pln">  </span><span class="pun">}</span></li><li class="L8"><span class="pun">}</span></li><li class="L9"><span class="com">// ...</span></li><li class="L0"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> setUpdatedAtValue</span><span class="pun">()</span></li><li class="L1"><span class="pun">{</span></li><li class="L2"><span class="pln">  $this</span><span class="pun">-&gt;</span><span class="pln">updated_at </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> \DateTime</span><span class="pun">();</span></li><li class="L3"><span class="pun">}</span></li></ol></pre>
<p>Faites de même pour la valeur <strong>created_at</strong> de la classe <strong>Affiliate</strong>:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// src/Ens/JobeetBundle/Entity/Affiliate.php</span></li><li class="L1"><span class="com">// ...</span></li><li class="L2"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> setCreatedAtValue</span><span class="pun">()</span></li><li class="L3"><span class="pun">{</span></li><li class="L4"><span class="pln">  $this</span><span class="pun">-&gt;</span><span class="pln">created_at </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> \DateTime</span><span class="pun">();</span></li><li class="L5"><span class="pun">}</span></li></ol></pre>
<p>Cela rendra Doctrine capable de définir les valeurs <strong>created_at</strong> et <strong>updated_at</strong> lors de l'enregistrement ou de la mise à jour des objets. Ce comportement a été défini dans les fichiers <strong>Job.orm.yml</strong> et <strong>Affiliate.orm.yml</strong> énumérés ci-dessus.</p>
<p>Nous allons également demander à Doctrine de créer nos tables de BDD (ou les mettre à jour afin de prendre en compte notre configuration) avec la commande:</p>
<pre>php app/console doctrine:schema:update --force
Updating database schema...
Database schema updated successfully! "7" queries were executed
</pre>
<blockquote><p><em>Cette tâche ne doit être vraiment utilisée qu'au cours du développement. Pour une méthode plus stable de mise à jour systématique de votre BDD de production, lisez <a href="http://symfony.com/doc/current/bundles/DoctrineMigrationsBundle/index.html" target="_blank">les migrations Doctrine</a>.</em></p></blockquote>
<br>
<h2>Les données initiales</h2>
<p>Les tables ont été créées dans la BDD, mais elles ne contiennent pas de données. Pour toute application web, il existe trois types de données: les <strong>données initiales</strong> (ce qui est nécessaire pour que l'application fonctionne, dans notre cas, nous avons quelques catégories initiales et un utilisateur admin), les <strong>données test</strong> (nécessaires pour tester l'application) et les <strong>données utilisateur</strong> (créées par les utilisateurs au fil du temps).</p>
<p>Pour remplir la BDD avec des données initiales, nous allons utiliser <a href="http://symfony.com/doc/current/bundles/DoctrineFixturesBundle/index.html" target="_blank">DoctrineFixturesBundle</a>. Pour installer ce paquet, suivez les étapes suivantes:</p>
<p>1. Ajoutez les lignes suivantes à votre fichier <strong>deps</strong>:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pun">[</span><span class="pln">doctrine</span><span class="pun">-</span><span class="pln">fixtures</span><span class="pun">]</span></li><li class="L1"><span class="pln">    git</span><span class="pun">=</span><span class="pln">http</span><span class="pun">:</span><span class="com">//github.com/doctrine/data-fixtures.git</span></li><li class="L2"><span class="pln"> </span></li><li class="L3"><span class="pun">[</span><span class="typ">DoctrineFixturesBundle</span><span class="pun">]</span></li><li class="L4"><span class="pln">    git</span><span class="pun">=</span><span class="pln">http</span><span class="pun">:</span><span class="com">//github.com/doctrine/DoctrineFixturesBundle.git</span></li><li class="L5"><span class="pln">    target</span><span class="pun">=</span><span class="str">/bundles/</span><span class="typ">Symfony</span><span class="pun">/</span><span class="typ">Bundle</span><span class="pun">/</span><span class="typ">DoctrineFixturesBundle</span></li><li class="L6"><span class="pln">    version</span><span class="pun">=</span><span class="pln">origin</span><span class="pun">/</span><span class="lit">2.0</span></li></ol></pre>
<p>2. Mettez à jour les vendors:</p>
<pre>php bin/vendors install --reinstall</pre>
<p>3. Enregistrez le namespace <strong>Doctrine\Common\DataFixtures</strong> dans <strong>app/autoload.php</strong> "<strong>avant</strong>" <strong>Doctrine\Common</strong>:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// ...</span></li><li class="L1"><span class="pln">$loader</span><span class="pun">-&gt;</span><span class="pln">registerNamespaces</span><span class="pun">(</span><span class="pln">array</span><span class="pun">(</span></li><li class="L2"><span class="pln">    </span><span class="com">// ...</span></li><li class="L3"><span class="pln">    </span><span class="str">'Doctrine\\Common\\DataFixtures'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> __DIR__</span><span class="pun">.</span><span class="str">'/../vendor/doctrine-fixtures/lib'</span><span class="pun">,</span></li><li class="L4"><span class="pln">    </span><span class="str">'Doctrine\\Common'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> __DIR__</span><span class="pun">.</span><span class="str">'/../vendor/doctrine-common/lib'</span><span class="pun">,</span></li><li class="L5"><span class="pln">    </span><span class="com">// ...</span></li><li class="L6"><span class="pun">));</span></li></ol></pre>
<p>4. Enregistrez le paquet <strong>DoctrineFixturesBundle</strong> dans <strong>app/AppKernel.php</strong>:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// ...</span></li><li class="L1"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> registerBundles</span><span class="pun">()</span></li><li class="L2"><span class="pun">{</span></li><li class="L3"><span class="pln">    $bundles </span><span class="pun">=</span><span class="pln"> array</span><span class="pun">(</span></li><li class="L4"><span class="pln">        </span><span class="com">// ...</span></li><li class="L5"><span class="pln">        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Symfony</span><span class="pln">\Bundle\DoctrineFixturesBundle\DoctrineFixturesBundle</span><span class="pun">(),</span></li><li class="L6"><span class="pln">        </span><span class="com">// ...</span></li><li class="L7"><span class="pln">    </span><span class="pun">);</span></li><li class="L8"><span class="pln">    </span><span class="com">// ...</span></li><li class="L9"><span class="pun">}</span></li></ol></pre>
<p>Maintenant que tout est en place, nous allons créer de nouvelles classes pour charger les données dans un nouveau dossier dans notre paquet: <strong>src/Ens/JobeetBundle/DataFixtures/ORM</strong>.</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// src/Ens/JobeetBundle/DataFixtures/ORM/LoadCategoryData.php</span></li><li class="L1"><span class="kwd">namespace</span><span class="pln"> </span><span class="typ">Ens</span><span class="pln">\JobeetBundle\DataFixtures\ORM</span><span class="pun">;</span></li><li class="L2"><span class="pln"> </span></li><li class="L3"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Doctrine</span><span class="pln">\Common\Persistence\ObjectManager</span><span class="pun">;</span></li><li class="L4"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Doctrine</span><span class="pln">\Common\DataFixtures\AbstractFixture</span><span class="pun">;</span></li><li class="L5"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Doctrine</span><span class="pln">\Common\DataFixtures\OrderedFixtureInterface</span><span class="pun">;</span></li><li class="L6"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Ens</span><span class="pln">\JobeetBundle\Entity\Category</span><span class="pun">;</span></li><li class="L7"><span class="pln"> </span></li><li class="L8"><span class="kwd">class</span><span class="pln"> </span><span class="typ">LoadCategoryData</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">AbstractFixture</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">OrderedFixtureInterface</span></li><li class="L9"><span class="pun">{</span></li><li class="L0"><span class="pln">  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> load</span><span class="pun">(</span><span class="typ">ObjectManager</span><span class="pln"> $em</span><span class="pun">)</span></li><li class="L1"><span class="pln">  </span><span class="pun">{</span></li><li class="L2"><span class="pln">    $design </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Category</span><span class="pun">();</span></li><li class="L3"><span class="pln">    $design</span><span class="pun">-&gt;</span><span class="pln">setName</span><span class="pun">(</span><span class="str">'Design'</span><span class="pun">);</span></li><li class="L4"><span class="pln"> </span></li><li class="L5"><span class="pln">    $programming </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Category</span><span class="pun">();</span></li><li class="L6"><span class="pln">    $programming</span><span class="pun">-&gt;</span><span class="pln">setName</span><span class="pun">(</span><span class="str">'Programming'</span><span class="pun">);</span></li><li class="L7"><span class="pln"> </span></li><li class="L8"><span class="pln">    $manager </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Category</span><span class="pun">();</span></li><li class="L9"><span class="pln">    $manager</span><span class="pun">-&gt;</span><span class="pln">setName</span><span class="pun">(</span><span class="str">'Manager'</span><span class="pun">);</span></li><li class="L0"><span class="pln"> </span></li><li class="L1"><span class="pln">    $administrator </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Category</span><span class="pun">();</span></li><li class="L2"><span class="pln">    $administrator</span><span class="pun">-&gt;</span><span class="pln">setName</span><span class="pun">(</span><span class="str">'Administrator'</span><span class="pun">);</span></li><li class="L3"><span class="pln"> </span></li><li class="L4"><span class="pln">    $em</span><span class="pun">-&gt;</span><span class="pln">persist</span><span class="pun">(</span><span class="pln">$design</span><span class="pun">);</span></li><li class="L5"><span class="pln">    $em</span><span class="pun">-&gt;</span><span class="pln">persist</span><span class="pun">(</span><span class="pln">$programming</span><span class="pun">);</span></li><li class="L6"><span class="pln">    $em</span><span class="pun">-&gt;</span><span class="pln">persist</span><span class="pun">(</span><span class="pln">$manager</span><span class="pun">);</span></li><li class="L7"><span class="pln">    $em</span><span class="pun">-&gt;</span><span class="pln">persist</span><span class="pun">(</span><span class="pln">$administrator</span><span class="pun">);</span></li><li class="L8"><span class="pln"> </span></li><li class="L9"><span class="pln">    $em</span><span class="pun">-&gt;</span><span class="pln">flush</span><span class="pun">();</span></li><li class="L0"><span class="pln"> </span></li><li class="L1"><span class="pln">    $this</span><span class="pun">-&gt;</span><span class="pln">addReference</span><span class="pun">(</span><span class="str">'category-design'</span><span class="pun">,</span><span class="pln"> $design</span><span class="pun">);</span></li><li class="L2"><span class="pln">    $this</span><span class="pun">-&gt;</span><span class="pln">addReference</span><span class="pun">(</span><span class="str">'category-programming'</span><span class="pun">,</span><span class="pln"> $programming</span><span class="pun">);</span></li><li class="L3"><span class="pln">    $this</span><span class="pun">-&gt;</span><span class="pln">addReference</span><span class="pun">(</span><span class="str">'category-manager'</span><span class="pun">,</span><span class="pln"> $manager</span><span class="pun">);</span></li><li class="L4"><span class="pln">    $this</span><span class="pun">-&gt;</span><span class="pln">addReference</span><span class="pun">(</span><span class="str">'category-administrator'</span><span class="pun">,</span><span class="pln"> $administrator</span><span class="pun">);</span></li><li class="L5"><span class="pln">  </span><span class="pun">}</span></li><li class="L6"><span class="pln"> </span></li><li class="L7"><span class="pln">  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> getOrder</span><span class="pun">()</span></li><li class="L8"><span class="pln">  </span><span class="pun">{</span></li><li class="L9"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"> </span><span class="com">// the order in which fixtures will be loaded</span></li><li class="L0"><span class="pln">  </span><span class="pun">}</span></li><li class="L1"><span class="pun">}</span></li></ol></pre>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// src/Ens/JobeetBundle/DataFixtures/ORM/LoadJobData.php</span></li><li class="L1"><span class="kwd">namespace</span><span class="pln"> </span><span class="typ">Ens</span><span class="pln">\JobeetBundle\DataFixtures\ORM</span><span class="pun">;</span></li><li class="L2"><span class="pln"> </span></li><li class="L3"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Doctrine</span><span class="pln">\Common\Persistence\ObjectManager</span><span class="pun">;</span></li><li class="L4"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Doctrine</span><span class="pln">\Common\DataFixtures\AbstractFixture</span><span class="pun">;</span></li><li class="L5"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Doctrine</span><span class="pln">\Common\DataFixtures\OrderedFixtureInterface</span><span class="pun">;</span></li><li class="L6"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Ens</span><span class="pln">\JobeetBundle\Entity\Job</span><span class="pun">;</span></li><li class="L7"><span class="pln"> </span></li><li class="L8"><span class="kwd">class</span><span class="pln"> </span><span class="typ">LoadJobData</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">AbstractFixture</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">OrderedFixtureInterface</span></li><li class="L9"><span class="pun">{</span></li><li class="L0"><span class="pln">  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> load</span><span class="pun">(</span><span class="typ">ObjectManager</span><span class="pln"> $em</span><span class="pun">)</span></li><li class="L1"><span class="pln">  </span><span class="pun">{</span></li><li class="L2"><span class="pln">    $job_sensio_labs </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Job</span><span class="pun">();</span></li><li class="L3"><span class="pln">    $job_sensio_labs</span><span class="pun">-&gt;</span><span class="pln">setCategory</span><span class="pun">(</span><span class="pln">$em</span><span class="pun">-&gt;</span><span class="pln">merge</span><span class="pun">(</span><span class="pln">$this</span><span class="pun">-&gt;</span><span class="pln">getReference</span><span class="pun">(</span><span class="str">'category-programming'</span><span class="pun">)));</span></li><li class="L4"><span class="pln">    $job_sensio_labs</span><span class="pun">-&gt;</span><span class="pln">setType</span><span class="pun">(</span><span class="str">'full-time'</span><span class="pun">);</span></li><li class="L5"><span class="pln">    $job_sensio_labs</span><span class="pun">-&gt;</span><span class="pln">setCompany</span><span class="pun">(</span><span class="str">'Sensio Labs'</span><span class="pun">);</span></li><li class="L6"><span class="pln">    $job_sensio_labs</span><span class="pun">-&gt;</span><span class="pln">setLogo</span><span class="pun">(</span><span class="str">'sensio-labs.gif'</span><span class="pun">);</span></li><li class="L7"><span class="pln">    $job_sensio_labs</span><span class="pun">-&gt;</span><span class="pln">setUrl</span><span class="pun">(</span><span class="str">'http://www.sensiolabs.com/'</span><span class="pun">);</span></li><li class="L8"><span class="pln">    $job_sensio_labs</span><span class="pun">-&gt;</span><span class="pln">setPosition</span><span class="pun">(</span><span class="str">'Web Developer'</span><span class="pun">);</span></li><li class="L9"><span class="pln">    $job_sensio_labs</span><span class="pun">-&gt;</span><span class="pln">setLocation</span><span class="pun">(</span><span class="str">'Paris, France'</span><span class="pun">);</span></li><li class="L0"><span class="pln">    $job_sensio_labs</span><span class="pun">-&gt;</span><span class="pln">setDescription</span><span class="pun">(</span><span class="str">'You\'ve already developed websites with symfony and you want to work with Open-Source technologies. You have a minimum of 3 years experience in web development with PHP or Java and you wish to participate to development of Web 2.0 sites using the best frameworks available.'</span><span class="pun">);</span></li><li class="L1"><span class="pln">    $job_sensio_labs</span><span class="pun">-&gt;</span><span class="pln">setHowToApply</span><span class="pun">(</span><span class="str">'Send your resume to fabien.potencier [at] sensio.com'</span><span class="pun">);</span></li><li class="L2"><span class="pln">    $job_sensio_labs</span><span class="pun">-&gt;</span><span class="pln">setIsPublic</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span></li><li class="L3"><span class="pln">    $job_sensio_labs</span><span class="pun">-&gt;</span><span class="pln">setIsActivated</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span></li><li class="L4"><span class="pln">    $job_sensio_labs</span><span class="pun">-&gt;</span><span class="pln">setToken</span><span class="pun">(</span><span class="str">'job_sensio_labs'</span><span class="pun">);</span></li><li class="L5"><span class="pln">    $job_sensio_labs</span><span class="pun">-&gt;</span><span class="pln">setEmail</span><span class="pun">(</span><span class="str">'job@example.com'</span><span class="pun">);</span></li><li class="L6"><span class="pln">    $job_sensio_labs</span><span class="pun">-&gt;</span><span class="pln">setExpiresAt</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> \DateTime</span><span class="pun">(</span><span class="str">'2012-10-10'</span><span class="pun">));</span></li><li class="L7"><span class="pln"> </span></li><li class="L8"><span class="pln">    $job_extreme_sensio </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Job</span><span class="pun">();</span></li><li class="L9"><span class="pln">    $job_extreme_sensio</span><span class="pun">-&gt;</span><span class="pln">setCategory</span><span class="pun">(</span><span class="pln">$em</span><span class="pun">-&gt;</span><span class="pln">merge</span><span class="pun">(</span><span class="pln">$this</span><span class="pun">-&gt;</span><span class="pln">getReference</span><span class="pun">(</span><span class="str">'category-design'</span><span class="pun">)));</span></li><li class="L0"><span class="pln">    $job_extreme_sensio</span><span class="pun">-&gt;</span><span class="pln">setType</span><span class="pun">(</span><span class="str">'part-time'</span><span class="pun">);</span></li><li class="L1"><span class="pln">    $job_extreme_sensio</span><span class="pun">-&gt;</span><span class="pln">setCompany</span><span class="pun">(</span><span class="str">'Extreme Sensio'</span><span class="pun">);</span></li><li class="L2"><span class="pln">    $job_extreme_sensio</span><span class="pun">-&gt;</span><span class="pln">setLogo</span><span class="pun">(</span><span class="str">'extreme-sensio.gif'</span><span class="pun">);</span></li><li class="L3"><span class="pln">    $job_extreme_sensio</span><span class="pun">-&gt;</span><span class="pln">setUrl</span><span class="pun">(</span><span class="str">'http://www.extreme-sensio.com/'</span><span class="pun">);</span></li><li class="L4"><span class="pln">    $job_extreme_sensio</span><span class="pun">-&gt;</span><span class="pln">setPosition</span><span class="pun">(</span><span class="str">'Web Designer'</span><span class="pun">);</span></li><li class="L5"><span class="pln">    $job_extreme_sensio</span><span class="pun">-&gt;</span><span class="pln">setLocation</span><span class="pun">(</span><span class="str">'Paris, France'</span><span class="pun">);</span></li><li class="L6"><span class="pln">    $job_extreme_sensio</span><span class="pun">-&gt;</span><span class="pln">setDescription</span><span class="pun">(</span><span class="str">'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in.'</span><span class="pun">);</span></li><li class="L7"><span class="pln">    $job_extreme_sensio</span><span class="pun">-&gt;</span><span class="pln">setHowToApply</span><span class="pun">(</span><span class="str">'Send your resume to fabien.potencier [at] sensio.com'</span><span class="pun">);</span></li><li class="L8"><span class="pln">    $job_extreme_sensio</span><span class="pun">-&gt;</span><span class="pln">setIsPublic</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span></li><li class="L9"><span class="pln">    $job_extreme_sensio</span><span class="pun">-&gt;</span><span class="pln">setIsActivated</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span></li><li class="L0"><span class="pln">    $job_extreme_sensio</span><span class="pun">-&gt;</span><span class="pln">setToken</span><span class="pun">(</span><span class="str">'job_extreme_sensio'</span><span class="pun">);</span></li><li class="L1"><span class="pln">    $job_extreme_sensio</span><span class="pun">-&gt;</span><span class="pln">setEmail</span><span class="pun">(</span><span class="str">'job@example.com'</span><span class="pun">);</span></li><li class="L2"><span class="pln">    $job_extreme_sensio</span><span class="pun">-&gt;</span><span class="pln">setExpiresAt</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> \DateTime</span><span class="pun">(</span><span class="str">'2012-10-10'</span><span class="pun">));</span></li><li class="L3"><span class="pln"> </span></li><li class="L4"><span class="pln">    $em</span><span class="pun">-&gt;</span><span class="pln">persist</span><span class="pun">(</span><span class="pln">$job_sensio_labs</span><span class="pun">);</span></li><li class="L5"><span class="pln">    $em</span><span class="pun">-&gt;</span><span class="pln">persist</span><span class="pun">(</span><span class="pln">$job_extreme_sensio</span><span class="pun">);</span></li><li class="L6"><span class="pln"> </span></li><li class="L7"><span class="pln">    $em</span><span class="pun">-&gt;</span><span class="pln">flush</span><span class="pun">();</span></li><li class="L8"><span class="pln">  </span><span class="pun">}</span></li><li class="L9"><span class="pln"> </span></li><li class="L0"><span class="pln">  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> getOrder</span><span class="pun">()</span></li><li class="L1"><span class="pln">  </span><span class="pun">{</span></li><li class="L2"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln"> </span><span class="com">// the order in which fixtures will be loaded</span></li><li class="L3"><span class="pln">  </span><span class="pun">}</span></li><li class="L4"><span class="pun">}</span></li></ol></pre>
<p>Une fois vos fixtures écrites, vous pouvez les charger via la ligne de commande suivante:</p>
<pre>php app/console doctrine:fixtures:load</pre>
<p>Vous pouvez maintenant vérifier votre BDD, vous devriez voir les données chargées dans les tables.</p>
<blockquote><p><em>Le fichier de fixtures des offres fait référence à deux images. Vous pouvez les télécharger (<a href="download/sensio-labs.gif">sensio-labs.gif</a>, <a href="download/extreme-sensio.gif">extreme-sensio.gif</a>) et les mettre dans le répertoire web/uploads/jobs/.</em></p></blockquote>
<br>
<h2>Voyez-le en action dans le navigateur</h2>
<p>Maintenant, nous allons utiliser un peu de magie! Exécutez à l'invite de commande:</p>
<pre>php app/console doctrine:generate:crud --entity=EnsJobeetBundle:Job --route-prefix=ens_job --with-write --format=yml</pre>
<p>Cela va créer un nouveau contrôleur <strong>src/Ens/JobeetBundle/Controllers/JobController.php</strong> avec des actions pour lister, créer, modifier et supprimer des offres (et leurs modèles, formulaires et routes correspondants). Pour le voir dans le navigateur, nous devons importer les nouvelles routes qui ont été créées dans <strong>src/Ens/JobeetBundle/Resources/config/routing/job.yml</strong> dans notre le fichier de routage principal de notre paquet:</p>
<pre class="prettyprint linenums lang-yaml"><ol class="linenums"><li class="L0"><span class="com"># src/Ens/JobeetBundle/Resources/config/routing.yml</span></li><li class="L1"><span class="kwd">EnsJobeetBundle_job:</span></li><li class="L2"><span class="pln">    </span><span class="kwd">resource: </span><span class="str">"@EnsJobeetBundle/Resources/config/routing/job.yml"</span></li><li class="L3"><span class="pln">    </span><span class="kwd">prefix: </span><span class="pln">/job</span></li><li class="L4"><span class="pln"> </span></li><li class="L5"><span class="kwd">EnsJobeetBundle_homepage:</span></li><li class="L6"><span class="pln">    </span><span class="kwd">pattern: </span><span class="pln"> /hello/{name}</span></li><li class="L7"><span class="pln">    </span><span class="kwd">defaults: </span><span class="pln">{ </span><span class="kwd">_controller: </span><span class="pln">EnsJobeetBundle</span><span class="pun">:</span><span class="pln">Default</span><span class="pun">:</span><span class="pln">index }</span></li></ol></pre>
<p>Nous aurons aussi besoin d'ajouter une méthode <strong>__toString()</strong> à notre classe <strong>Category</strong> pour être utilisée par le menu déroulant Catégorie du formulaire de modification d'offre:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// src/Ens/JobeetBundle/Entity/Category.php</span></li><li class="L1"><span class="com">// ...</span></li><li class="L2"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> __toString</span><span class="pun">()</span></li><li class="L3"><span class="pun">{</span></li><li class="L4"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> $this</span><span class="pun">-&gt;</span><span class="pln">getName</span><span class="pun">();</span></li><li class="L5"><span class="pun">}</span></li></ol></pre>
<p>Videz le cache:</p>
<pre>php app/console cache:clear --env=prod
php app/console cache:clear --env=dev
</pre>
<p>Vous pouvez maintenant tester le contrôleur <strong>Job</strong> dans un navigateur: <a href="http://jobeet.local/job/" target="_blank">http://jobeet.local/job/</a> ou, dans l'environnement de développement, <a href="http://jobeet.local/app_dev.php/job/" target="_blank">http://jobeet.local/app_dev.php/job/</a></p>
<p class="tcenter"><a href="assets/img/jobeet_3-2.png" rel="shadowbox"><img src="assets/img/jobeet_3-2.png" alt="" class="img-polaroid"></a></p>
<p class="tcenter"><a href="assets/img/jobeet_3-3.png" rel="shadowbox"><img src="assets/img/jobeet_3-3.png" alt="" class="img-polaroid"></a></p>
<p>Vous pouvez désormais créer et modifier des offres. Essayez de laisser un champ obligatoire vide, ou essayez d'entrer une date invalide. C'est vrai, Symfony a créé des règles de validation de base par introspection du schéma de BDD.</p>
<br>
<h2>Réflexions finales</h2>
<p>Nous avons à peine écrit du code PHP, mais nous avons un module web de travail pour le modèle <strong>Job</strong>, prêt à être modifié et personnalisé. Rappelez-vous : pas de code PHP signifie pas de bugs!</p>
<br>
<p class="clearfix noprint">
	<a href="le-projet" class="btn btn-success pull-left">Chapitre précédent</a>
	<a href="le-controleur-et-la-vue" class="btn btn-success pull-right">Chapitre suivant</a>
</p>														<p class="link_source noprint"><a href="http://www.ens.ro/2012/03/27/symfony2-jobeet-day-3-the-data-model/" target="_blank">» Lire l'article original</a></p>
																					<br>
