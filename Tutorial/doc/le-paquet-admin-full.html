<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Tuto Jobeet Symfony2 FR :: Démarrage du projet</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link rel="stylesheet" type="text/css" href="assets/css/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="assets/css/bootstrap-responsive.css" />
<link rel="stylesheet" type="text/css" href="assets/css/style.css" />
<link rel="stylesheet" type="text/css" href="assets/css/docs.css" />
<link rel="stylesheet" type="text/css" href="assets/css/prettify.css" />
<link rel="stylesheet" type="text/css" href="assets/css/shadowbox.css" />
<link rel="stylesheet" type="text/css" href="assets/css/print.css" media="print" />
<link rel="shortcut icon" href="assets/img/favicon.ico">
<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

</head>

<body>
	<a href="https://github.com/thujohn/Jobeet" target="_blank" id="gogithub"><img src="assets/img/github.gif" alt="" /></a>
	<div class="navbar navbar-inverse hide-on-desktop show-on-tablets show-on-mobile noprint">
		<div class="navbar-inner noprint">
			<div class="container">
				<button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="brand" href="./">Jobeet FR</a>
				<div class="nav-collapse collapse">
					<ul class="nav">
						<li class="sommaire"><a href="sommaire.html"><i class="icon-chevron-right"></i>Sommaire</a></li><li class="demarrage-du-projet"><a href="demarrage-du-projet.html"><i class="icon-chevron-right"></i><strong>[01]</strong> Démarrage du projet</a></li><li class="le-projet"><a href="le-projet.html"><i class="icon-chevron-right"></i><strong>[02]</strong> Le projet</a></li><li class="le-modele-de-donnees"><a href="le-modele-de-donnees.html"><i class="icon-chevron-right"></i><strong>[03]</strong> Le Modèle de Données</a></li><li class="le-controleur-et-la-vue"><a href="le-controleur-et-la-vue.html"><i class="icon-chevron-right"></i><strong>[04]</strong> Le Contrôleur et la Vue</a></li><li class="le-routage"><a href="le-routage.html"><i class="icon-chevron-right"></i><strong>[05]</strong> Le Routage</a></li><li class="aller-plus-loin-avec-le-modele"><a href="aller-plus-loin-avec-le-modele.html"><i class="icon-chevron-right"></i><strong>[06]</strong> Aller plus loin avec le Modèle</a></li><li class="jouons-avec-la-page-categorie"><a href="jouons-avec-la-page-categorie.html"><i class="icon-chevron-right"></i><strong>[07]</strong> Jouons avec les catégories</a></li><li class="les-tests-unitaires"><a href="les-tests-unitaires.html"><i class="icon-chevron-right"></i><strong>[08]</strong> Les tests unitaires</a></li><li class="les-tests-fonctionnels"><a href="les-tests-fonctionnels.html"><i class="icon-chevron-right"></i><strong>[09]</strong> Les tests fonctionnels</a></li><li class="les-formulaires"><a href="les-formulaires.html"><i class="icon-chevron-right"></i><strong>[10]</strong> Les formulaires</a></li><li class="testez-vos-formulaires"><a href="testez-vos-formulaires.html"><i class="icon-chevron-right"></i><strong>[11]</strong> Testez vos formulaires</a></li><li class="active"><a href="le-paquet-admin.html"><i class="icon-chevron-right"></i><strong>[12]</strong> Le paquet Admin</a></li><li class="securite"><a href="securite.html"><i class="icon-chevron-right"></i><strong>[13]</strong> Sécurité</a></li><li class="flux-de-donnees"><a href="flux-de-donnees.html"><i class="icon-chevron-right"></i><strong>[14]</strong> Flux de données</a></li><li class="services-web"><a href="services-web.html"><i class="icon-chevron-right"></i><strong>[15]</strong> Services Web</a></li><li class="l-envoi-d-email"><a href="l-envoi-d-email.html"><i class="icon-chevron-right"></i><strong>[16]</strong> L'envoi d'email</a></li><li class="la-recherche"><a href="la-recherche.html"><i class="icon-chevron-right"></i><strong>[17]</strong> La recherche</a></li><li class="ajax"><a href="ajax.html"><i class="icon-chevron-right"></i><strong>[18]</strong> AJAX</a></li><li class="internationalisation-et-regionalisation"><a href="internationalisation-et-regionalisation.html"><i class="icon-chevron-right"></i><strong>[19]</strong> Internationalisation et régionalisation</a></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	<div id="container">
		<div id="bootstrap-docs">
			<header class="jumbotron subhead hide-on-tablets hide-on-mobile" id="overview">
				<div class="container">
					<h1><a href="./">Jobeet FR</a></h1>
					<p class="lead">Le tutoriel pour Symfony2 en français</p>
				</div>
			</header>
			<div class="container">
				<div class="row">
										<div class="span12">
											<section class="justify">
                                            <a href="le-paquet-admin.html" class="pull-right btn btn-success hide-on-tablets hide-on-mobile noprint">Vue normale</a><div class="page-header clearfix"><h1 class="pull-left">Le paquet Admin</h1></div>
							<p>Avec ce que nous avons ajouté au <a href="testez-vos-formulaires.html">chapitre 11</a>, l'application est maintenant pleinement utilisable par les chercheurs d'emploi et les recruteurs. Il est temps de parler un peu de la section admin de notre application. Aujourd'hui, grâce au paquet <a href="http://sonata-project.org/bundles/admin/2-0/doc/index.html" target="_blank">SonataAdminBundle</a>, nous allons développer une interface complète d'administration pour Jobeet en moins d'une heure.</p>
<br>
<h2>Installation du paquet Admin</h2>
<p>Ouvrez votre fichier <strong>deps</strong> et ajoutez ces lignes:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pun">[</span><span class="typ">SonataCacheBundle</span><span class="pun">]</span></li><li class="L1"><span class="pln">    git</span><span class="pun">=</span><span class="pln">http</span><span class="pun">:</span><span class="com">//github.com/sonata-project/SonataCacheBundle.git</span></li><li class="L2"><span class="pln">    target</span><span class="pun">=</span><span class="str">/bundles/</span><span class="typ">Sonata</span><span class="pun">/</span><span class="typ">CacheBundle</span></li><li class="L3"><span class="pln">    version</span><span class="pun">=</span><span class="pln">origin</span><span class="pun">/</span><span class="lit">2.0</span></li><li class="L4"><span class="pln"> </span></li><li class="L5"><span class="pun">[</span><span class="typ">SonataBlockBundle</span><span class="pun">]</span></li><li class="L6"><span class="pln">    git</span><span class="pun">=</span><span class="pln">http</span><span class="pun">:</span><span class="com">//github.com/sonata-project/SonataBlockBundle.git</span></li><li class="L7"><span class="pln">    target</span><span class="pun">=</span><span class="str">/bundles/</span><span class="typ">Sonata</span><span class="pun">/</span><span class="typ">BlockBundle</span></li><li class="L8"><span class="pln">    version</span><span class="pun">=</span><span class="pln">origin</span><span class="pun">/</span><span class="lit">2.0</span></li><li class="L9"><span class="pln"> </span></li><li class="L0"><span class="pun">[</span><span class="typ">SonatajQueryBundle</span><span class="pun">]</span></li><li class="L1"><span class="pln">    git</span><span class="pun">=</span><span class="pln">http</span><span class="pun">:</span><span class="com">//github.com/sonata-project/SonatajQueryBundle.git</span></li><li class="L2"><span class="pln">    target</span><span class="pun">=</span><span class="str">/bundles/</span><span class="typ">Sonata</span><span class="pun">/</span><span class="pln">jQueryBundle</span></li><li class="L3"><span class="pln"> </span></li><li class="L4"><span class="pun">[</span><span class="typ">KnpMenu</span><span class="pun">]</span></li><li class="L5"><span class="pln">    git</span><span class="pun">=</span><span class="pln">https</span><span class="pun">:</span><span class="com">//github.com/KnpLabs/KnpMenu.git</span></li><li class="L6"><span class="pln">    version</span><span class="pun">=</span><span class="pln">v1</span><span class="pun">.</span><span class="lit">1.2</span></li><li class="L7"><span class="pln"> </span></li><li class="L8"><span class="pun">[</span><span class="typ">KnpMenuBundle</span><span class="pun">]</span></li><li class="L9"><span class="pln">    git</span><span class="pun">=</span><span class="pln">https</span><span class="pun">:</span><span class="com">//github.com/KnpLabs/KnpMenuBundle.git</span></li><li class="L0"><span class="pln">    target</span><span class="pun">=</span><span class="pln">bundles</span><span class="pun">/</span><span class="typ">Knp</span><span class="pun">/</span><span class="typ">Bundle</span><span class="pun">/</span><span class="typ">MenuBundle</span></li><li class="L1"><span class="pln">    version</span><span class="pun">=</span><span class="pln">v1</span><span class="pun">.</span><span class="lit">1.0</span></li><li class="L2"><span class="pln"> </span></li><li class="L3"><span class="pun">[</span><span class="typ">Exporter</span><span class="pun">]</span></li><li class="L4"><span class="pln">    git</span><span class="pun">=</span><span class="pln">http</span><span class="pun">:</span><span class="com">//github.com/sonata-project/exporter.git</span></li><li class="L5"><span class="pln">    target</span><span class="pun">=</span><span class="str">/exporter</span></li><li class="L6"><span class="str"> </span></li><li class="L7"><span class="str">[SonataDoctrineORMAdminBundle]</span></li><li class="L8"><span class="str">    git=http:/</span><span class="pun">/</span><span class="pln">github</span><span class="pun">.</span><span class="pln">com</span><span class="pun">/</span><span class="pln">sonata</span><span class="pun">-</span><span class="pln">project</span><span class="pun">/</span><span class="typ">SonataDoctrineORMAdminBundle</span><span class="pun">.</span><span class="pln">git</span></li><li class="L9"><span class="pln">    target</span><span class="pun">=</span><span class="str">/bundles/</span><span class="typ">Sonata</span><span class="pun">/</span><span class="typ">DoctrineORMAdminBundle</span></li><li class="L0"><span class="pln">    version</span><span class="pun">=</span><span class="pln">origin</span><span class="pun">/</span><span class="lit">2.0</span></li><li class="L1"><span class="pln"> </span></li><li class="L2"><span class="pun">[</span><span class="typ">SonataAdminBundle</span><span class="pun">]</span></li><li class="L3"><span class="pln">    git</span><span class="pun">=</span><span class="pln">git</span><span class="pun">:</span><span class="com">//github.com/sonata-project/SonataAdminBundle.git</span></li><li class="L4"><span class="pln">    target</span><span class="pun">=</span><span class="str">/bundles/</span><span class="typ">Sonata</span><span class="pun">/</span><span class="typ">AdminBundle</span></li><li class="L5"><span class="pln">    version</span><span class="pun">=</span><span class="pln">origin</span><span class="pun">/</span><span class="lit">2.0</span></li></ol></pre>
<p>Exécutez le script <strong>vendors</strong> pour télécharger les paquets:</p>
<pre>php bin/vendors install --reinstall</pre>
<p>Activez les paquets dans votre <strong>autoload.php</strong>:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// app/autoload.php</span></li><li class="L1"><span class="pln"> </span></li><li class="L2"><span class="pln">$loader</span><span class="pun">-&gt;</span><span class="pln">registerNamespaces</span><span class="pun">(</span><span class="pln">array</span><span class="pun">(</span></li><li class="L3"><span class="pln">    </span><span class="com">// ...</span></li><li class="L4"><span class="pln">    </span><span class="str">'Sonata'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> __DIR__</span><span class="pun">.</span><span class="str">'/../vendor/bundles'</span><span class="pun">,</span></li><li class="L5"><span class="pln">    </span><span class="str">'Exporter'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> __DIR__</span><span class="pun">.</span><span class="str">'/../vendor/exporter/lib'</span><span class="pun">,</span></li><li class="L6"><span class="pln">    </span><span class="str">'Knp\Bundle'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> __DIR__</span><span class="pun">.</span><span class="str">'/../vendor/bundles'</span><span class="pun">,</span></li><li class="L7"><span class="pln">    </span><span class="str">'Knp\Menu'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> __DIR__</span><span class="pun">.</span><span class="str">'/../vendor/KnpMenu/src'</span><span class="pun">,</span></li><li class="L8"><span class="pln">    </span><span class="com">// ...</span></li><li class="L9"><span class="pun">));</span></li></ol></pre>
<p>et <strong>AppKernel.php</strong>:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// app/AppKernel.php</span></li><li class="L1"><span class="pln"> </span></li><li class="L2"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> registerBundles</span><span class="pun">()</span></li><li class="L3"><span class="pun">{</span></li><li class="L4"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> array</span><span class="pun">(</span></li><li class="L5"><span class="pln">        </span><span class="com">// ...</span></li><li class="L6"><span class="pln">        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\SonataAdminBundle</span><span class="pun">(),</span></li><li class="L7"><span class="pln">        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\BlockBundle\SonataBlockBundle</span><span class="pun">(),</span></li><li class="L8"><span class="pln">        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\CacheBundle\SonataCacheBundle</span><span class="pun">(),</span></li><li class="L9"><span class="pln">        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\j</span><span class="typ">QueryBundle</span><span class="pln">\SonatajQueryBundle</span><span class="pun">(),</span></li><li class="L0"><span class="pln">        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\DoctrineORMAdminBundle\SonataDoctrineORMAdminBundle</span><span class="pun">(),</span></li><li class="L1"><span class="pln">        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Knp</span><span class="pln">\Bundle\MenuBundle\KnpMenuBundle</span><span class="pun">(),</span></li><li class="L2"><span class="pln">        </span><span class="com">// ...</span></li><li class="L3"><span class="pln">    </span><span class="pun">);</span></li><li class="L4"><span class="pun">}</span></li></ol></pre>
<p>Vous aurez aussi besoin de modifier votre fichier <strong>app/config/config.yml</strong>. Ajoutez ce qui suit à la fin:</p>
<pre class="prettyprint linenums lang-yaml"><ol class="linenums"><li class="L0"><span class="com"># app/config/config.yml</span></li><li class="L1"><span class="kwd">sonata_admin:</span></li><li class="L2"><span class="pln">    </span><span class="kwd">title: </span><span class="pln">Jobeet Admin</span></li><li class="L3"><span class="pln"> </span></li><li class="L4"><span class="kwd">sonata_block:</span></li><li class="L5"><span class="pln">    </span><span class="kwd">default_contexts: </span><span class="pln">[cms]</span></li><li class="L6"><span class="pln">    </span><span class="kwd">blocks:</span></li><li class="L7"><span class="pln">        sonata.admin.block.</span><span class="kwd">admin_list:</span></li><li class="L8"><span class="pln">            </span><span class="kwd">contexts: </span><span class="pln">  [admin]</span></li><li class="L9"><span class="pln"> </span></li><li class="L0"><span class="pln">        sonata.block.service.</span><span class="kwd">text:</span></li><li class="L1"><span class="pln">        sonata.block.service.</span><span class="kwd">action:</span></li><li class="L2"><span class="pln">        sonata.block.service.rss</span><span class="pun">:</span></li></ol></pre>
<p>Aussi, recherchez l'entrée <strong>translator</strong> et décommentez-la si elle est commentée:</p>
<pre class="prettyprint linenums lang-yaml"><ol class="linenums"><li class="L0"><span class="kwd">framework:</span></li><li class="L1"><span class="pln">    </span><span class="kwd">translator: </span><span class="pln">     { </span><span class="kwd">fallback: </span><span class="dec">%</span><span class="pln">locale</span><span class="dec">%</span><span class="pln"> }</span></li></ol></pre>
<p>Maintenant, installez les assets des paquets:</p>
<pre>php app/console assets:install web</pre>
<p>N'oubliez pas de vider le cache:</p>
<pre>php app/console cache:clear --env=dev
php app/console cache:clear --env=prod
</pre>
<p>Maintenant importez les routes d'admin dans le fichier de routage de l'application:</p>
<pre class="prettyprint linenums lang-yaml"><ol class="linenums"><li class="L0"><span class="com"># app/config/routing.yml</span></li><li class="L1"><span class="pln"> </span></li><li class="L2"><span class="kwd">admin:</span></li><li class="L3"><span class="pln">    </span><span class="kwd">resource: </span><span class="str">'@SonataAdminBundle/Resources/config/routing/sonata_admin.xml'</span></li><li class="L4"><span class="pln">    </span><span class="kwd">prefix: </span><span class="pln">/admin</span></li><li class="L5"><span class="pln"> </span></li><li class="L6"><span class="kwd">_sonata_admin:</span></li><li class="L7"><span class="pln">    </span><span class="kwd">resource: </span><span class="pln">.</span></li><li class="L8"><span class="pln">    </span><span class="kwd">type: </span><span class="pln">sonata_admin</span></li><li class="L9"><span class="pln">    </span><span class="kwd">prefix: </span><span class="pln">/admin</span></li><li class="L0"><span class="pln"> </span></li><li class="L1"><span class="com"># ...</span></li></ol></pre>
<p>Vous devriez maintenant être en mesure d'accéder à l'interface d'administration en utilisant l'URL suivante:</p>
<pre>http://jobeet.local/app_dev.php/admin/dashboard</pre>
<br>
<h2>Le contrôleur CRUD</h2>
<p>Le contrôleur CRUD contient les actions de base CRUD. Elle est liée à une classe Admin en mappant le nom du contrôleur à l'instance Admin valide. Toutes ou partie des actions peuvent être remplacées en fonction des besoins du projet. Le contrôleur utilise la classe Admin pour construire les différentes actions. A l'intérieur du contrôleur, l'objet Admin est accessible via la propriété de configuration.</p>
<p>Maintenant créez un contrôleur pour chaque entité. D'abord pour <strong>Category</strong>:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// src/Ens/JobeetBundle/Controller/CategoryAdminController.php</span></li><li class="L1"><span class="kwd">namespace</span><span class="pln"> </span><span class="typ">Ens</span><span class="pln">\JobeetBundle\Controller</span><span class="pun">;</span></li><li class="L2"><span class="pln"> </span></li><li class="L3"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Controller\C</span><span class="typ">RUDController</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Controller</span><span class="pun">;</span></li><li class="L4"><span class="pln"> </span></li><li class="L5"><span class="kwd">class</span><span class="pln"> </span><span class="typ">CategoryAdminController</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Controller</span></li><li class="L6"><span class="pun">{</span></li><li class="L7"><span class="pln"> </span></li><li class="L8"><span class="pun">}</span></li></ol></pre>
<p>Et maintenant, pour <strong>Job</strong>:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// src/Ens/JobeetBundle/Controller/JobAdminController.php</span></li><li class="L1"><span class="kwd">namespace</span><span class="pln"> </span><span class="typ">Ens</span><span class="pln">\JobeetBundle\Controller</span><span class="pun">;</span></li><li class="L2"><span class="pln"> </span></li><li class="L3"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Controller\C</span><span class="typ">RUDController</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Controller</span><span class="pun">;</span></li><li class="L4"><span class="pln"> </span></li><li class="L5"><span class="kwd">class</span><span class="pln"> </span><span class="typ">JobAdminController</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Controller</span></li><li class="L6"><span class="pun">{</span></li><li class="L7"><span class="pln"> </span></li><li class="L8"><span class="pun">}</span></li></ol></pre>
<br>
<h2>Création de la classe Admin</h2>
<p>La classe Admin représente la cartographie de votre modèle et sections d'admininstration (formulaires, listes, affichages). La meilleure façon de créer une classe d'administration de votre modèle est d'étendre la classe <strong>Sonata\AdminBundle\Admin\Admin</strong>. Nous allons créer des classes d'admin dans le dossier admin de notre paquet. Pour les catégories:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// src/Ens/JobeetBundle/Admin/CategoryAdmin.php</span></li><li class="L1"><span class="pln"> </span></li><li class="L2"><span class="kwd">namespace</span><span class="pln"> </span><span class="typ">Ens</span><span class="pln">\JobeetBundle\Admin</span><span class="pun">;</span></li><li class="L3"><span class="pln"> </span></li><li class="L4"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Admin\Admin</span><span class="pun">;</span></li><li class="L5"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Datagrid\ListMapper</span><span class="pun">;</span></li><li class="L6"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Datagrid\DatagridMapper</span><span class="pun">;</span></li><li class="L7"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Validator\ErrorElement</span><span class="pun">;</span></li><li class="L8"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Form\FormMapper</span><span class="pun">;</span></li><li class="L9"><span class="pln"> </span></li><li class="L0"><span class="kwd">class</span><span class="pln"> </span><span class="typ">CategoryAdmin</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Admin</span></li><li class="L1"><span class="pun">{</span></li><li class="L2"><span class="pun">}</span></li></ol></pre>
<p>Et pour les offres:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// src/Ens/JobeetBundle/Admin/JobAdmin.php</span></li><li class="L1"><span class="pln"> </span></li><li class="L2"><span class="kwd">namespace</span><span class="pln"> </span><span class="typ">Ens</span><span class="pln">\JobeetBundle\Admin</span><span class="pun">;</span></li><li class="L3"><span class="pln"> </span></li><li class="L4"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Admin\Admin</span><span class="pun">;</span></li><li class="L5"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Datagrid\ListMapper</span><span class="pun">;</span></li><li class="L6"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Datagrid\DatagridMapper</span><span class="pun">;</span></li><li class="L7"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Validator\ErrorElement</span><span class="pun">;</span></li><li class="L8"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Form\FormMapper</span><span class="pun">;</span></li><li class="L9"><span class="pln"> </span></li><li class="L0"><span class="kwd">class</span><span class="pln"> </span><span class="typ">JobAdmin</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Admin</span></li><li class="L1"><span class="pun">{</span></li><li class="L2"><span class="pun">}</span></li></ol></pre>
<p>Maintenant, nous devons ajouter chaque classe admin dans le fichier de configuration <strong>services.yml</strong>:</p>
<pre class="prettyprint linenums lang-yaml"><ol class="linenums"><li class="L0"><span class="com"># src/Ens/JobeetBundle/Resources/config/services.yml</span></li><li class="L1"><span class="pln"> </span></li><li class="L2"><span class="kwd">services:</span></li><li class="L3"><span class="pln">    ens.jobeet.admin.</span><span class="kwd">category:</span></li><li class="L4"><span class="pln">        </span><span class="kwd">class: </span><span class="pln">Ens\JobeetBundle\Admin\CategoryAdmin</span></li><li class="L5"><span class="pln">        </span><span class="kwd">tags:</span></li><li class="L6"><span class="pln">            </span><span class="pun">-</span><span class="pln"> { </span><span class="kwd">name: </span><span class="pln">sonata.admin, </span><span class="kwd">manager_type: </span><span class="pln">orm, </span><span class="kwd">group: </span><span class="pln">jobeet, </span><span class="kwd">label: </span><span class="pln">Categories }</span></li><li class="L7"><span class="pln">        </span><span class="kwd">arguments: </span><span class="pln">[null, Ens\JobeetBundle\Entity\Category, EnsJobeetBundle</span><span class="pun">:</span><span class="pln">CategoryAdmin]</span></li><li class="L8"><span class="pln"> </span></li><li class="L9"><span class="pln">    ens.jobeet.admin.</span><span class="kwd">job:</span></li><li class="L0"><span class="pln">        </span><span class="kwd">class: </span><span class="pln">Ens\JobeetBundle\Admin\JobAdmin</span></li><li class="L1"><span class="pln">        </span><span class="kwd">tags:</span></li><li class="L2"><span class="pln">            </span><span class="pun">-</span><span class="pln"> { </span><span class="kwd">name: </span><span class="pln">sonata.admin, </span><span class="kwd">manager_type: </span><span class="pln">orm, </span><span class="kwd">group: </span><span class="pln">jobeet, </span><span class="kwd">label: </span><span class="pln">Jobs }</span></li><li class="L3"><span class="pln">        </span><span class="kwd">arguments: </span><span class="pln">[null, Ens\JobeetBundle\Entity\Job, EnsJobeetBundle</span><span class="pun">:</span><span class="pln">JobAdmin]</span></li></ol></pre>
<p>A ce stade, nous pouvons voir dans le tableau de bord le groupe Jobeet et à l'intérieur les modules <strong>Job</strong> et <strong>Category</strong>, avec leurs liens respectifs d'ajout et de liste.</p>
<p class="tcenter"><a href="assets/img/jobeet_12-1.png" rel="shadowbox"><img src="assets/img/jobeet_12-1.png" alt="" class="img-polaroid"></a></p>
<br>
<h2>Configuration des classes Admin</h2>
<p>À ce stade, si l'on suit n'importe quel lien rien ne se passera. C'est parce que nous n'avons pas configuré les champs qui appartiennent à la liste et au formulaire. Faisons une configuration de base, d'abord pour les catégories:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// src Ens/JobeetBundle/Admin/CategoryAdmin.php</span></li><li class="L1"><span class="kwd">namespace</span><span class="pln"> </span><span class="typ">Ens</span><span class="pln">\JobeetBundle\Admin</span><span class="pun">;</span></li><li class="L2"><span class="pln"> </span></li><li class="L3"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Admin\Admin</span><span class="pun">;</span></li><li class="L4"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Datagrid\ListMapper</span><span class="pun">;</span></li><li class="L5"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Datagrid\DatagridMapper</span><span class="pun">;</span></li><li class="L6"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Validator\ErrorElement</span><span class="pun">;</span></li><li class="L7"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Form\FormMapper</span><span class="pun">;</span></li><li class="L8"><span class="pln"> </span></li><li class="L9"><span class="kwd">class</span><span class="pln"> </span><span class="typ">CategoryAdmin</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Admin</span></li><li class="L0"><span class="pun">{</span></li><li class="L1"><span class="pln">    </span><span class="com">// setup the default sort column and order</span></li><li class="L2"><span class="pln">    </span><span class="kwd">protected</span><span class="pln"> $datagridValues </span><span class="pun">=</span><span class="pln"> array</span><span class="pun">(</span></li><li class="L3"><span class="pln">        </span><span class="str">'_sort_order'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'ASC'</span><span class="pun">,</span></li><li class="L4"><span class="pln">        </span><span class="str">'_sort_by'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'name'</span></li><li class="L5"><span class="pln">    </span><span class="pun">);</span></li><li class="L6"><span class="pln"> </span></li><li class="L7"><span class="pln">    </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> configureFormFields</span><span class="pun">(</span><span class="typ">FormMapper</span><span class="pln"> $formMapper</span><span class="pun">)</span></li><li class="L8"><span class="pln">    </span><span class="pun">{</span></li><li class="L9"><span class="pln">        $formMapper</span></li><li class="L0"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'name'</span><span class="pun">)</span></li><li class="L1"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'slug'</span><span class="pun">)</span></li><li class="L2"><span class="pln">        </span><span class="pun">;</span></li><li class="L3"><span class="pln">    </span><span class="pun">}</span></li><li class="L4"><span class="pln"> </span></li><li class="L5"><span class="pln">    </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> configureDatagridFilters</span><span class="pun">(</span><span class="typ">DatagridMapper</span><span class="pln"> $datagridMapper</span><span class="pun">)</span></li><li class="L6"><span class="pln">    </span><span class="pun">{</span></li><li class="L7"><span class="pln">        $datagridMapper</span></li><li class="L8"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'name'</span><span class="pun">)</span></li><li class="L9"><span class="pln">        </span><span class="pun">;</span></li><li class="L0"><span class="pln">    </span><span class="pun">}</span></li><li class="L1"><span class="pln"> </span></li><li class="L2"><span class="pln">    </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> configureListFields</span><span class="pun">(</span><span class="typ">ListMapper</span><span class="pln"> $listMapper</span><span class="pun">)</span></li><li class="L3"><span class="pln">    </span><span class="pun">{</span></li><li class="L4"><span class="pln">        $listMapper</span></li><li class="L5"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">addIdentifier</span><span class="pun">(</span><span class="str">'name'</span><span class="pun">)</span></li><li class="L6"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'slug'</span><span class="pun">)</span></li><li class="L7"><span class="pln">        </span><span class="pun">;</span></li><li class="L8"><span class="pln">    </span><span class="pun">}</span></li><li class="L9"><span class="pun">}</span></li></ol></pre>
<p>Et maintenant pour les offres:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// src Ens/JobeetBundle/Admin/JobAdmin.php</span></li><li class="L1"><span class="kwd">namespace</span><span class="pln"> </span><span class="typ">Ens</span><span class="pln">\JobeetBundle\Admin</span><span class="pun">;</span></li><li class="L2"><span class="pln"> </span></li><li class="L3"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Admin\Admin</span><span class="pun">;</span></li><li class="L4"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Datagrid\ListMapper</span><span class="pun">;</span></li><li class="L5"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Datagrid\DatagridMapper</span><span class="pun">;</span></li><li class="L6"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Validator\ErrorElement</span><span class="pun">;</span></li><li class="L7"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Form\FormMapper</span><span class="pun">;</span></li><li class="L8"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Show\ShowMapper</span><span class="pun">;</span></li><li class="L9"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Ens</span><span class="pln">\JobeetBundle\Entity\Job</span><span class="pun">;</span></li><li class="L0"><span class="pln"> </span></li><li class="L1"><span class="kwd">class</span><span class="pln"> </span><span class="typ">JobAdmin</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Admin</span></li><li class="L2"><span class="pun">{</span></li><li class="L3"><span class="pln">    </span><span class="com">// setup the defaut sort column and order</span></li><li class="L4"><span class="pln">    </span><span class="kwd">protected</span><span class="pln"> $datagridValues </span><span class="pun">=</span><span class="pln"> array</span><span class="pun">(</span></li><li class="L5"><span class="pln">        </span><span class="str">'_sort_order'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'DESC'</span><span class="pun">,</span></li><li class="L6"><span class="pln">        </span><span class="str">'_sort_by'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'created_at'</span></li><li class="L7"><span class="pln">    </span><span class="pun">);</span></li><li class="L8"><span class="pln"> </span></li><li class="L9"><span class="pln">    </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> configureFormFields</span><span class="pun">(</span><span class="typ">FormMapper</span><span class="pln"> $formMapper</span><span class="pun">)</span></li><li class="L0"><span class="pln">    </span><span class="pun">{</span></li><li class="L1"><span class="pln">        $formMapper</span></li><li class="L2"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'category'</span><span class="pun">)</span></li><li class="L3"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'type'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'choice'</span><span class="pun">,</span><span class="pln"> array</span><span class="pun">(</span><span class="str">'choices'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="typ">Job</span><span class="pun">::</span><span class="pln">getTypes</span><span class="pun">(),</span><span class="pln"> </span><span class="str">'expanded'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">))</span></li><li class="L4"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'company'</span><span class="pun">)</span></li><li class="L5"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'file'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'file'</span><span class="pun">,</span><span class="pln"> array</span><span class="pun">(</span><span class="str">'label'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'Company logo'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'required'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">))</span></li><li class="L6"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'url'</span><span class="pun">)</span></li><li class="L7"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'position'</span><span class="pun">)</span></li><li class="L8"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'location'</span><span class="pun">)</span></li><li class="L9"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'description'</span><span class="pun">)</span></li><li class="L0"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'how_to_apply'</span><span class="pun">)</span></li><li class="L1"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'is_public'</span><span class="pun">)</span></li><li class="L2"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'email'</span><span class="pun">)</span></li><li class="L3"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'is_activated'</span><span class="pun">)</span></li><li class="L4"><span class="pln">        </span><span class="pun">;</span></li><li class="L5"><span class="pln">    </span><span class="pun">}</span></li><li class="L6"><span class="pln"> </span></li><li class="L7"><span class="pln">    </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> configureDatagridFilters</span><span class="pun">(</span><span class="typ">DatagridMapper</span><span class="pln"> $datagridMapper</span><span class="pun">)</span></li><li class="L8"><span class="pln">    </span><span class="pun">{</span></li><li class="L9"><span class="pln">        $datagridMapper</span></li><li class="L0"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'category'</span><span class="pun">)</span></li><li class="L1"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'company'</span><span class="pun">)</span></li><li class="L2"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'position'</span><span class="pun">)</span></li><li class="L3"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'description'</span><span class="pun">)</span></li><li class="L4"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'is_activated'</span><span class="pun">)</span></li><li class="L5"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'is_public'</span><span class="pun">)</span></li><li class="L6"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'email'</span><span class="pun">)</span></li><li class="L7"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'expires_at'</span><span class="pun">)</span></li><li class="L8"><span class="pln">        </span><span class="pun">;</span></li><li class="L9"><span class="pln">    </span><span class="pun">}</span></li><li class="L0"><span class="pln"> </span></li><li class="L1"><span class="pln">    </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> configureListFields</span><span class="pun">(</span><span class="typ">ListMapper</span><span class="pln"> $listMapper</span><span class="pun">)</span></li><li class="L2"><span class="pln">    </span><span class="pun">{</span></li><li class="L3"><span class="pln">        $listMapper</span></li><li class="L4"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">addIdentifier</span><span class="pun">(</span><span class="str">'company'</span><span class="pun">)</span></li><li class="L5"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'position'</span><span class="pun">)</span></li><li class="L6"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'location'</span><span class="pun">)</span></li><li class="L7"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'url'</span><span class="pun">)</span></li><li class="L8"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'is_activated'</span><span class="pun">)</span></li><li class="L9"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'email'</span><span class="pun">)</span></li><li class="L0"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'category'</span><span class="pun">)</span></li><li class="L1"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'expires_at'</span><span class="pun">)</span></li><li class="L2"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'_action'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'actions'</span><span class="pun">,</span><span class="pln"> array</span><span class="pun">(</span></li><li class="L3"><span class="pln">                </span><span class="str">'actions'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> array</span><span class="pun">(</span></li><li class="L4"><span class="pln">                    </span><span class="str">'view'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> array</span><span class="pun">(),</span></li><li class="L5"><span class="pln">                    </span><span class="str">'edit'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> array</span><span class="pun">(),</span></li><li class="L6"><span class="pln">                    </span><span class="str">'delete'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> array</span><span class="pun">(),</span></li><li class="L7"><span class="pln">                </span><span class="pun">)</span></li><li class="L8"><span class="pln">            </span><span class="pun">))</span></li><li class="L9"><span class="pln">        </span><span class="pun">;</span></li><li class="L0"><span class="pln">    </span><span class="pun">}</span></li><li class="L1"><span class="pln"> </span></li><li class="L2"><span class="pln">    </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> configureShowField</span><span class="pun">(</span><span class="typ">ShowMapper</span><span class="pln"> $showMapper</span><span class="pun">)</span></li><li class="L3"><span class="pln">    </span><span class="pun">{</span></li><li class="L4"><span class="pln">        $showMapper</span></li><li class="L5"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'category'</span><span class="pun">)</span></li><li class="L6"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'type'</span><span class="pun">)</span></li><li class="L7"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'company'</span><span class="pun">)</span></li><li class="L8"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'webPath'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'string'</span><span class="pun">,</span><span class="pln"> array</span><span class="pun">(</span><span class="str">'template'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'EnsJobeetBundle:JobAdmin:list_image.html.twig'</span><span class="pun">))</span></li><li class="L9"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'url'</span><span class="pun">)</span></li><li class="L0"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'position'</span><span class="pun">)</span></li><li class="L1"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'location'</span><span class="pun">)</span></li><li class="L2"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'description'</span><span class="pun">)</span></li><li class="L3"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'how_to_apply'</span><span class="pun">)</span></li><li class="L4"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'is_public'</span><span class="pun">)</span></li><li class="L5"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'is_activated'</span><span class="pun">)</span></li><li class="L6"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'token'</span><span class="pun">)</span></li><li class="L7"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'email'</span><span class="pun">)</span></li><li class="L8"><span class="pln">            </span><span class="pun">-&gt;</span><span class="pln">add</span><span class="pun">(</span><span class="str">'expires_at'</span><span class="pun">)</span></li><li class="L9"><span class="pln">        </span><span class="pun">;</span></li><li class="L0"><span class="pln">    </span><span class="pun">}</span></li><li class="L1"><span class="pun">}</span></li></ol></pre>
<p>Pour l'action <strong>show</strong>, nous avons utilisé un template personnalisé pour afficher le <strong>logo</strong> de l'entreprise:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">&lt;!-- src/Ens/JobeetBundle/Resources/views/JobAdmin/list_image.html.twig --&gt;</span></li><li class="L1"><span class="pln"> </span></li><li class="L2"><span class="tag">&lt;tr&gt;</span></li><li class="L3"><span class="pln">    </span><span class="tag">&lt;th&gt;</span><span class="pln">Logo</span><span class="tag">&lt;/th&gt;</span></li><li class="L4"><span class="pln">    </span><span class="tag">&lt;td&gt;&lt;img</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"{{ asset(object.webPath) }}"</span><span class="pln"> </span><span class="tag">/&gt;&lt;/td&gt;</span></li><li class="L5"><span class="tag">&lt;/tr&gt;</span></li></ol></pre>
<p>Grâce à cela, nous avons créé un module d'administration de base avec les opérations CRUD pour nos offres et catégories. Parmi les fonctionnalités que vous trouverez lors de son utilisation:</p>
<ul class="unstyled">
	<li>- La liste des objets est paginée</li>
	<li>- La liste peut être triée</li>
	<li>- La liste peut être filtrée</li>
	<li>- Les objets peuvent être créés, modifiés et supprimés</li>
	<li>- Les objets sélectionnés peuvent être supprimés par lot</li>
	<li>- La validation du formulaire est activée</li>
	<li>- Les messages flash donnent une rétroaction immédiate à l'utilisateur</li>
</ul>
<br>
<h2>Actions par lot (batch)</h2>
<p>Les actions batch sont des actions déclenchées sur un ensemble de modèles sélectionnés (tous ou seulement un sous-ensemble spécifique). Vous pouvez facilement ajouter une action batch personnalisée dans la liste. Par défaut, l'action <strong>delete</strong> permet de supprimer plusieurs entrées à la fois.</p>
<p>Pour ajouter une nouvelle action batch, nous devons remplacer la méthode <strong>getBatchActions</strong> de la classe Admin. Nous allons définir ici une nouvelle action <strong>extend</strong>:</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// src/Ens/JobeetBundle/Admin/JobAdmin.php</span></li><li class="L1"><span class="com">// ...</span></li><li class="L2"><span class="pln"> </span></li><li class="L3"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> getBatchActions</span><span class="pun">()</span></li><li class="L4"><span class="pun">{</span></li><li class="L5"><span class="pln">    </span><span class="com">// retrieve the default (currently only the delete action) actions</span></li><li class="L6"><span class="pln">    $actions </span><span class="pun">=</span><span class="pln"> parent</span><span class="pun">::</span><span class="pln">getBatchActions</span><span class="pun">();</span></li><li class="L7"><span class="pln"> </span></li><li class="L8"><span class="pln">    </span><span class="com">// check user permissions</span></li><li class="L9"><span class="pln">    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">$this</span><span class="pun">-&gt;</span><span class="pln">hasRoute</span><span class="pun">(</span><span class="str">'edit'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> $this</span><span class="pun">-&gt;</span><span class="pln">isGranted</span><span class="pun">(</span><span class="str">'EDIT'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> $this</span><span class="pun">-&gt;</span><span class="pln">hasRoute</span><span class="pun">(</span><span class="str">'delete'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> $this</span><span class="pun">-&gt;</span><span class="pln">isGranted</span><span class="pun">(</span><span class="str">'DELETE'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></li><li class="L0"><span class="pln">        $actions</span><span class="pun">[</span><span class="str">'extend'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> array</span><span class="pun">(</span></li><li class="L1"><span class="pln">            </span><span class="str">'label'</span><span class="pln">            </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'Extend'</span><span class="pun">,</span></li><li class="L2"><span class="pln">            </span><span class="str">'ask_confirmation'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="com">// If true, a confirmation will be asked before performing the action</span></li><li class="L3"><span class="pln">        </span><span class="pun">);</span></li><li class="L4"><span class="pln"> </span></li><li class="L5"><span class="pln">    </span><span class="pun">}</span></li><li class="L6"><span class="pln"> </span></li><li class="L7"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> $actions</span><span class="pun">;</span></li><li class="L8"><span class="pun">}</span></li></ol></pre>
<p>La méthode <strong>batchActionExtend</strong> de <strong>JobAdminController</strong> sera exécutée pour atteindre la logique de base. Les modèles sélectionnés sont transmis à la méthode par le biais d'un argument requête qui les récupére. Si, pour une raison quelconque, il est logique d'effectuer votre action batch sans la méthode de sélection par défaut (par exemple vous avez défini une autre façon, au niveau du template, pour sélectionner le modèle à moindre granularité), la requête passée est <strong>null</strong>.</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// src/Ens/JobeetBundle/Controller/JobAdminController.php</span></li><li class="L1"><span class="kwd">namespace</span><span class="pln"> </span><span class="typ">Ens</span><span class="pln">\JobeetBundle\Controller</span><span class="pun">;</span></li><li class="L2"><span class="pln"> </span></li><li class="L3"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\AdminBundle\Controller\C</span><span class="typ">RUDController</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Controller</span><span class="pun">;</span></li><li class="L4"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Sonata</span><span class="pln">\DoctrineORMAdminBundle\Datagrid\ProxyQuery </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">ProxyQueryInterface</span><span class="pun">;</span></li><li class="L5"><span class="kwd">use</span><span class="pln"> </span><span class="typ">Symfony</span><span class="pln">\Component\HttpFoundation\RedirectResponse</span><span class="pun">;</span></li><li class="L6"><span class="pln"> </span></li><li class="L7"><span class="kwd">class</span><span class="pln"> </span><span class="typ">JobAdminController</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Controller</span></li><li class="L8"><span class="pun">{</span></li><li class="L9"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> batchActionExtend</span><span class="pun">(</span><span class="typ">ProxyQueryInterface</span><span class="pln"> $selectedModelQuery</span><span class="pun">)</span></li><li class="L0"><span class="pln">    </span><span class="pun">{</span></li><li class="L1"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">$this</span><span class="pun">-&gt;</span><span class="pln">admin</span><span class="pun">-&gt;</span><span class="pln">isGranted</span><span class="pun">(</span><span class="str">'EDIT'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">===</span><span class="pln"> </span><span class="kwd">false</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> $this</span><span class="pun">-&gt;</span><span class="pln">admin</span><span class="pun">-&gt;</span><span class="pln">isGranted</span><span class="pun">(</span><span class="str">'DELETE'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">===</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">)</span></li><li class="L2"><span class="pln">        </span><span class="pun">{</span></li><li class="L3"><span class="pln">            </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AccessDeniedException</span><span class="pun">();</span></li><li class="L4"><span class="pln">        </span><span class="pun">}</span></li><li class="L5"><span class="pln"> </span></li><li class="L6"><span class="pln">        $request </span><span class="pun">=</span><span class="pln"> $this</span><span class="pun">-&gt;</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'request'</span><span class="pun">);</span></li><li class="L7"><span class="pln">        $modelManager </span><span class="pun">=</span><span class="pln"> $this</span><span class="pun">-&gt;</span><span class="pln">admin</span><span class="pun">-&gt;</span><span class="pln">getModelManager</span><span class="pun">();</span></li><li class="L8"><span class="pln"> </span></li><li class="L9"><span class="pln">        $selectedModels </span><span class="pun">=</span><span class="pln"> $selectedModelQuery</span><span class="pun">-&gt;</span><span class="pln">execute</span><span class="pun">();</span></li><li class="L0"><span class="pln"> </span></li><li class="L1"><span class="pln">        </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span></li><li class="L2"><span class="pln">            </span><span class="kwd">foreach</span><span class="pln"> </span><span class="pun">(</span><span class="pln">$selectedModels </span><span class="kwd">as</span><span class="pln"> $selectedModel</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L3"><span class="pln">                $selectedModel</span><span class="pun">-&gt;</span><span class="pln">extend</span><span class="pun">();</span></li><li class="L4"><span class="pln">                $modelManager</span><span class="pun">-&gt;</span><span class="pln">update</span><span class="pun">(</span><span class="pln">$selectedModel</span><span class="pun">);</span></li><li class="L5"><span class="pln">            </span><span class="pun">}</span></li><li class="L6"><span class="pln">        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="pln">\Exception $e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L7"><span class="pln">            $this</span><span class="pun">-&gt;</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'session'</span><span class="pun">)-&gt;</span><span class="pln">setFlash</span><span class="pun">(</span><span class="str">'sonata_flash_error'</span><span class="pun">,</span><span class="pln"> $e</span><span class="pun">-&gt;</span><span class="pln">getMessage</span><span class="pun">());</span></li><li class="L8"><span class="pln"> </span></li><li class="L9"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RedirectResponse</span><span class="pun">(</span><span class="pln">$this</span><span class="pun">-&gt;</span><span class="pln">admin</span><span class="pun">-&gt;</span><span class="pln">generateUrl</span><span class="pun">(</span><span class="str">'list'</span><span class="pun">,</span><span class="pln">$this</span><span class="pun">-&gt;</span><span class="pln">admin</span><span class="pun">-&gt;</span><span class="pln">getFilterParameters</span><span class="pun">()));</span></li><li class="L0"><span class="pln">        </span><span class="pun">}</span></li><li class="L1"><span class="pln"> </span></li><li class="L2"><span class="pln">        $this</span><span class="pun">-&gt;</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'session'</span><span class="pun">)-&gt;</span><span class="pln">setFlash</span><span class="pun">(</span><span class="str">'sonata_flash_success'</span><span class="pun">,</span><span class="pln">  sprintf</span><span class="pun">(</span><span class="str">'The selected jobs validity has been extended until %s.'</span><span class="pun">,</span><span class="pln"> date</span><span class="pun">(</span><span class="str">'m/d/Y'</span><span class="pun">,</span><span class="pln"> time</span><span class="pun">()</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">86400</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">30</span><span class="pun">)));</span></li><li class="L3"><span class="pln"> </span></li><li class="L4"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RedirectResponse</span><span class="pun">(</span><span class="pln">$this</span><span class="pun">-&gt;</span><span class="pln">admin</span><span class="pun">-&gt;</span><span class="pln">generateUrl</span><span class="pun">(</span><span class="str">'list'</span><span class="pun">,</span><span class="pln">$this</span><span class="pun">-&gt;</span><span class="pln">admin</span><span class="pun">-&gt;</span><span class="pln">getFilterParameters</span><span class="pun">()));</span></li><li class="L5"><span class="pln">    </span><span class="pun">}</span></li><li class="L6"><span class="pun">}</span></li></ol></pre>
<p>Ajoutons une nouvelle action batch qui va supprimer toutes les offres qui n'ont pas été activées par le recruteur depuis plus de 60 jours. Pour cette action, nous n'avons pas besoin de sélectionner des offres d'emploi de la liste parce que la logique de l'action sera de rechercher les enregistrements correspondants et les supprimer.</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// src/Ens/JobeetBundle/Admin/JobAdmin.php</span></li><li class="L1"><span class="com">// ...</span></li><li class="L2"><span class="pln"> </span></li><li class="L3"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> getBatchActions</span><span class="pun">()</span></li><li class="L4"><span class="pun">{</span></li><li class="L5"><span class="pln">    </span><span class="com">// retrieve the default (currently only the delete action) actions</span></li><li class="L6"><span class="pln">    $actions </span><span class="pun">=</span><span class="pln"> parent</span><span class="pun">::</span><span class="pln">getBatchActions</span><span class="pun">();</span></li><li class="L7"><span class="pln"> </span></li><li class="L8"><span class="pln">    </span><span class="com">// check user permissions</span></li><li class="L9"><span class="pln">    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">$this</span><span class="pun">-&gt;</span><span class="pln">hasRoute</span><span class="pun">(</span><span class="str">'edit'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> $this</span><span class="pun">-&gt;</span><span class="pln">isGranted</span><span class="pun">(</span><span class="str">'EDIT'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> $this</span><span class="pun">-&gt;</span><span class="pln">hasRoute</span><span class="pun">(</span><span class="str">'delete'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> $this</span><span class="pun">-&gt;</span><span class="pln">isGranted</span><span class="pun">(</span><span class="str">'DELETE'</span><span class="pun">)){</span></li><li class="L0"><span class="pln">        $actions</span><span class="pun">[</span><span class="str">'extend'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> array</span><span class="pun">(</span></li><li class="L1"><span class="pln">            </span><span class="str">'label'</span><span class="pln">            </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'Extend'</span><span class="pun">,</span></li><li class="L2"><span class="pln">            </span><span class="str">'ask_confirmation'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="com">// If true, a confirmation will be asked before performing the action</span></li><li class="L3"><span class="pln">        </span><span class="pun">);</span></li><li class="L4"><span class="pln"> </span></li><li class="L5"><span class="pln">        $actions</span><span class="pun">[</span><span class="str">'deleteNeverActivated'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> array</span><span class="pun">(</span></li><li class="L6"><span class="pln">            </span><span class="str">'label'</span><span class="pln">            </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'Delete never activated jobs'</span><span class="pun">,</span></li><li class="L7"><span class="pln">            </span><span class="str">'ask_confirmation'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="com">// If true, a confirmation will be asked before performing the action</span></li><li class="L8"><span class="pln">        </span><span class="pun">);</span></li><li class="L9"><span class="pln">    </span><span class="pun">}</span></li><li class="L0"><span class="pln"> </span></li><li class="L1"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> $actions</span><span class="pun">;</span></li><li class="L2"><span class="pun">}</span></li></ol></pre>
<p>En plus de créer l'action <strong>batchActionDeleteNeverActivated</strong>, nous allons créer une nouvelle méthode dans <strong>JobAdminController</strong>, <strong>batchActionDeleteNeverActivatedIsRelevant</strong>, qui est exécuté avant toute confirmation, pour s'assurer qu'y a quelque chose pour confirmer. Dans notre cas elle renverra toujours <strong>true</strong> parce que le choix des offres qui seront supprimées est géré par la logique dans la méthode <strong>JobRepository::cleanup()</strong></p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// src/Ens/JobeetBundle/Controller/JobAdminController.php</span></li><li class="L1"><span class="com">// ...</span></li><li class="L2"><span class="pln"> </span></li><li class="L3"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> batchActionDeleteNeverActivatedIsRelevant</span><span class="pun">()</span></li><li class="L4"><span class="pun">{</span></li><li class="L5"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></li><li class="L6"><span class="pun">}</span></li><li class="L7"><span class="pln"> </span></li><li class="L8"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> batchActionDeleteNeverActivated</span><span class="pun">()</span></li><li class="L9"><span class="pun">{</span></li><li class="L0"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">$this</span><span class="pun">-&gt;</span><span class="pln">admin</span><span class="pun">-&gt;</span><span class="pln">isGranted</span><span class="pun">(</span><span class="str">'EDIT'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">===</span><span class="pln"> </span><span class="kwd">false</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> $this</span><span class="pun">-&gt;</span><span class="pln">admin</span><span class="pun">-&gt;</span><span class="pln">isGranted</span><span class="pun">(</span><span class="str">'DELETE'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">===</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L1"><span class="pln">        </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AccessDeniedException</span><span class="pun">();</span></li><li class="L2"><span class="pln">    </span><span class="pun">}</span></li><li class="L3"><span class="pln"> </span></li><li class="L4"><span class="pln">    $em </span><span class="pun">=</span><span class="pln"> $this</span><span class="pun">-&gt;</span><span class="pln">getDoctrine</span><span class="pun">()-&gt;</span><span class="pln">getEntityManager</span><span class="pun">();</span></li><li class="L5"><span class="pln">    $nb </span><span class="pun">=</span><span class="pln"> $em</span><span class="pun">-&gt;</span><span class="pln">getRepository</span><span class="pun">(</span><span class="str">'EnsJobeetBundle:Job'</span><span class="pun">)-&gt;</span><span class="pln">cleanup</span><span class="pun">(</span><span class="lit">60</span><span class="pun">);</span></li><li class="L6"><span class="pln"> </span></li><li class="L7"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">$nb</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L8"><span class="pln">        $this</span><span class="pun">-&gt;</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'session'</span><span class="pun">)-&gt;</span><span class="pln">setFlash</span><span class="pun">(</span><span class="str">'sonata_flash_success'</span><span class="pun">,</span><span class="pln">  sprintf</span><span class="pun">(</span><span class="str">'%d never activated jobs have been deleted successfully.'</span><span class="pun">,</span><span class="pln"> $nb</span><span class="pun">));</span></li><li class="L9"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></li><li class="L0"><span class="pln">        $this</span><span class="pun">-&gt;</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'session'</span><span class="pun">)-&gt;</span><span class="pln">setFlash</span><span class="pun">(</span><span class="str">'sonata_flash_info'</span><span class="pun">,</span><span class="pln">  </span><span class="str">'No job to delete.'</span><span class="pun">);</span></li><li class="L1"><span class="pln">    </span><span class="pun">}</span></li><li class="L2"><span class="pln"> </span></li><li class="L3"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RedirectResponse</span><span class="pun">(</span><span class="pln">$this</span><span class="pun">-&gt;</span><span class="pln">admin</span><span class="pun">-&gt;</span><span class="pln">generateUrl</span><span class="pun">(</span><span class="str">'list'</span><span class="pun">,</span><span class="pln">$this</span><span class="pun">-&gt;</span><span class="pln">admin</span><span class="pun">-&gt;</span><span class="pln">getFilterParameters</span><span class="pun">()));</span></li><li class="L4"><span class="pun">}</span></li></ol></pre>
<p>Dans le prochain chapitre, nous allons voir comment sécuriser la section admin avec un nom d'utilisateur et un mot de passe. Ce sera l'occasion de parler de la sécurité Symfony2.</p>
<br>
<p class="clearfix noprint">
	<a href="testez-vos-formulaires.html" class="btn btn-success pull-left">Chapitre précédent</a>
	<a href="securite.html" class="btn btn-success pull-right">Chapitre suivant</a>
</p>														<p class="link_source noprint"><a href="http://www.ens.ro/2012/07/13/symfony2-jobeet-day-12-the-admin-bundle/" target="_blank">» Lire l'article original</a></p>
																					<br>
													</section>
					</div>
				</div>
				<hr />
				<footer>
					<p class="tcenter">Tutoriel original par <a href="http://www.ens.ro/2012/03/21/jobeet-tutorial-with-symfony2/" target="_blank">Dragos Holban</a> - Traduit par <a href="https://plus.google.com/109236735134093009460?rel=author" target="_blank">Jonathan Thuau</a> - Le tuto sur <a href="https://github.com/thujohn/Jobeet" target="_blank">github</a></p>
				</footer>
			</div>
		</div>
	</div>
<script src="assets/js/jquery-1.8.2.min.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/prettify.js"></script>
<script src="assets/js/lang-yaml.js"></script>
<script src="assets/js/shadowbox.js"></script>
<script type="text/javascript">
<!--
jQuery(document).ready(function(){
	Shadowbox.init();
	prettyPrint();
	jQuery('.bs-docs-sidenav').affix({
		offset: {
			top: 150,
			bottom: 270
		}
	});
	jQuery('a[href*=#]').click(function (e) {
		var hash = jQuery(this).attr('href');
		e.preventDefault();
		var dest = 0;
		if (jQuery(this.hash).offset().top > (jQuery(document).height() - jQuery(window).height())){
			dest = jQuery(document).height() - jQuery(window).height();
		}else{
			dest = jQuery(this.hash).offset().top;
		}
		jQuery('html,body').animate({scrollTop:dest}, 1000, 'swing');
	});
});
-->
</script>
</body>
</html>